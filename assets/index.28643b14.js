import{s as e,d as a,r as l,w as t,c as n,a as o,b as i,F as s,e as r,f as u,g as c,h as d,i as m,P as p,T as h}from"./vendor.8efa5101.js";!function(){const e=document.createElement("link").relList;if(!(e&&e.supports&&e.supports("modulepreload"))){for(const e of document.querySelectorAll('link[rel="modulepreload"]'))a(e);new MutationObserver((e=>{for(const l of e)if("childList"===l.type)for(const e of l.addedNodes)"LINK"===e.tagName&&"modulepreload"===e.rel&&a(e)})).observe(document,{childList:!0,subtree:!0})}function a(e){if(e.ep)return;e.ep=!0;const a=function(e){const a={};return e.integrity&&(a.integrity=e.integrity),e.referrerpolicy&&(a.referrerPolicy=e.referrerpolicy),"use-credentials"===e.crossorigin?a.credentials="include":"anonymous"===e.crossorigin?a.credentials="omit":a.credentials="same-origin",a}(e);fetch(e.href,a)}}();const v=e(),f=e(),g=a((()=>{const e=l();return t(f,(()=>{var a;e.value&&(f.value?(e.value.width=f.value.width,e.value.height=f.value.height,null==(a=e.value.getContext("2d"))||a.putImageData(f.value,0,0)):(e.value.width=0,e.value.height=0))}),{immediate:!1}),()=>n(o,{style:"width: 100%; height: calc(100vh - 40px);"},{default:()=>[n("canvas",{ref:e},null)]})}));var b="_filter-panel_1vxbl_1",y="_actions_1vxbl_8",w="_filter-list_1vxbl_17",N="_filter_1vxbl_1",_="_psnr_1vxbl_23";function x(e,a){return a.reduce(((e,a)=>a(e)),e)}function C(e,a){return a.displayName=e,a}function L(e,a){return document.createElement("canvas").getContext("2d").createImageData(e,a)}function E(e,a){const l=a.length,t=Math.floor(l/2),{data:n,height:o,width:i}=e;return P(e,((e,s)=>{let r=0,u=0,c=0;for(let d=0;d<l;d++)for(let m=0;m<l;m++){const l=s+d-t,p=e+m-t;if(l>=0&&l<o&&p>=0&&p<i){const e=a[d][m],t=4*(l*i+p);r+=n[t]*e,u+=n[t+1]*e,c+=n[t+2]*e}}return[r,u,c]}))}function P({width:e,height:a},l){const t=L(e,a);for(let n=0;n<a;n++)for(let a=0;a<e;a++){const[o,i,s]=l(a,n),r=4*(n*e+a);t.data[r]=o,t.data[r+1]=i,t.data[r+2]=s,t.data[r+3]=255}return t}function M(e,a=3){return Array.from({length:a}).map((()=>Array(a).fill(e)))}function k(e){let a=0;return e.forEach((e=>e.forEach((e=>a+=e)))),function(e,a){return e.map((e=>e.map((e=>e*a))))}(e,1/a)}function I(e){const a=e.length;return e.sort(),a%2==0?(e[a/2-1]+e[a/2])/2:e[Math.floor(a/2)]}const R=k(M(1)),S=C("Mean",(e=>E(e,R))),A=k([[1,2,1],[2,4,2],[1,2,1]]),D=C("Gaussian",(e=>E(e,A))),F=C("Median",(e=>{const{data:a,height:l,width:t}=e;return P(e,((e,n)=>{const o=[],i=[],s=[];for(let r=0;r<3;r++)for(let u=0;u<3;u++){const c=n+r-1,d=e+u-1;if(c>=0&&c<l&&d>=0&&d<t){const e=4*(c*t+d);o.push(a[e]),i.push(a[e+1]),s.push(a[e+2])}}return[I(o),I(i),I(s)]}))})),G=[[0,-1,0],[-1,4,-1],[0,-1,0]],O=C("Laplacian",(e=>E(e,G))),T=[[0,-.2,0],[-.2,1.8,-.2],[0,-.2,0]],j=C("Sharpen",(e=>E(e,T))),B=k(M(1/9)),U=C("Low Pass",(e=>E(e,B))),$=[[-1,-1,-1],[-1,8,-1],[-1,-1,-1]],q=C("High Pass",(e=>E(e,$))),H=[[1/4,0,-1/4],[.5,0,-.5],[1/4,0,-1/4]],K=[[1/4,.5,1/4],[0,0,0],[-1/4,-.5,-1/4]],z=C("Sobel",(e=>function(e,a){const l=e.data,t=a.data,n=l.length,o=L(e.width,e.height);for(let i=0;i<n;i++){const e=l[i]+t[i];o.data[i]=e>255?255:e}return o}(E(e,H),E(e,K)))),J=[[0,0,0],[1,-1,0],[0,0,0]],Q=C("Roberts",(e=>E(e,J))),V=[[0,0,1,0,0],[0,1,2,1,0],[1,2,-16,2,1],[0,1,2,1,0],[0,0,1,0,0]],W=C("LoG",(e=>E(e,V))),X=k([[1,4,7,4,1],[4,16,26,16,4],[7,26,41,26,7],[4,16,26,16,4],[1,4,7,4,1]]),Y=C("Gaussian Blur",(e=>E(e,X))),Z=k([[1,0,0,0,0,0,0,0,0],[0,1,0,0,0,0,0,0,0],[0,0,1,0,0,0,0,0,0],[0,0,0,1,0,0,0,0,0],[0,0,0,0,1,0,0,0,0],[0,0,0,0,0,1,0,0,0],[0,0,0,0,0,0,1,0,0],[0,0,0,0,0,0,0,1,0],[0,0,0,0,0,0,0,0,1]]),ee=C("Motion Blur",(e=>E(e,Z))),ae=[[-1,-1,0],[-1,0,1],[0,1,1]],le=C("Embossing",(e=>E(e,ae)));function te(){const e=(a="image/*",()=>new Promise((e=>{const l=document.createElement("input");l.type="file",a&&(l.accept=a),l.onchange=()=>{if(!l.files)return;const a=Array.from(l.files);e(a[0])},l.click()})));var a;return()=>new Promise((a=>{e().then((e=>{const l=new Image;l.onload=()=>{const e=document.createElement("canvas");e.width=l.width,e.height=l.height;const t=e.getContext("2d");t.drawImage(l,0,0),a(t.getImageData(0,0,l.width,l.height))},l.src=URL.createObjectURL(e)}))}))}function ne(e,a){const{width:l,height:t,data:n}=e,{data:o}=a,i=e.data.length;let s=0;for(let u=0;u<i;u++)s+=Math.pow(n[u]-o[u],2);const r=s/(l*t)/3;return 10*Math.log10(65025/r)}const oe=a((()=>{const e=l(),a=a=>{var l;return null==(l=e.value)?void 0:l.toggle(a)},{psnr:t,busy:o,filters:m,handlePush:p,handleRemove:h,handleClear:g}=function(){const e=[],a=l(0),t=l(!1),n=l=>{e.push(l),f.value&&(t.value=!0,setTimeout((()=>{f.value=x(f.value,[l]),a.value=ne(v.value,f.value),t.value=!1}),0))},o=l=>{e.splice(l,1),0===e.length?i():f.value&&v.value&&(t.value=!0,setTimeout((()=>{f.value=x(v.value,e),a.value=ne(v.value,f.value),t.value=!1}),0))},i=()=>{e.length=0,f.value&&v.value&&(f.value=v.value),a.value=0};return{filters:e,handlePush:n,handleRemove:o,handleClear:i,busy:t,psnr:a}}(),C=[{label:"Smoothing",items:[{label:S.displayName,command:()=>p(S)},{label:D.displayName,command:()=>p(D)},{label:F.displayName,command:()=>p(F)}]},{label:"Edge/Line",items:[{label:Q.displayName,command:()=>p(Q)},{label:W.displayName,command:()=>p(W)},{label:z.displayName,command:()=>p(z)},{label:q.displayName,command:()=>p(q)},{label:O.displayName,command:()=>p(O)}]},{label:"Enhancement",items:[{label:j.displayName,command:()=>p(j)},{label:U.displayName,command:()=>p(U)},{label:Y.displayName,command:()=>p(Y)},{label:ee.displayName,command:()=>p(ee)},{label:le.displayName,command:()=>p(le)}]}],L=te(),E=async()=>{f.value=v.value=await L()};return()=>n("div",{class:b},[n("div",null,[n("div",{class:`p-buttonset ${y}`},[n(i,{label:"Clear",class:"p-button-secondary p-button-outlined",icon:"pi pi-trash",onClick:g,disabled:!f.value||o.value},null),n(s,null,[n(i,{label:"Filters",icon:"pi pi-plus",class:"p-button-secondary","aria-haspopup":"true",onClick:a,disabled:!f.value||o.value},null),n(r,{ref:e,model:C,popup:!0},null)])]),n("div",{class:w},[m.map(((e,a)=>n("p",{class:N},[u(n(i,{label:e.displayName,class:"p-button-text p-button-plain",onClick:()=>h(a),disabled:o.value},null),[[c("tooltip"),`Remove ${e.displayName} Filter`]])]))).reverse()])]),n("div",null,[n("div",{class:_},[d("PSNR: "),t.value]),n("p",null,[n(i,{label:"Open Image",style:"width: 100%",icon:"pi pi-folder-open",class:"p-button",onClick:E,disabled:o.value},null)])])])}));m(a((()=>()=>n(s,null,[n("div",{class:"filter-panel"},[n(oe,null,null)]),n("div",{class:"image-container"},[n(g,null,null)])])))).use(p).directive("tooltip",h).mount("#app");
